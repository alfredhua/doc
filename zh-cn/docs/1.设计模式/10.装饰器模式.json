{
  "filename": "10.装饰器模式.md",
  "__html": "<p>装饰器模式：</p>\n<p>装饰器的核心就是新接口继承原有的接口，对于原有的实现类，重新注入到新的实现类</p>\n<p>如：public interface ISigninForThirdService  extends ISigninService</p>\n<p>装饰器模式是一种特殊的适配器模式：</p>\n<p>比较：</p>\n<table>\n<thead>\n<tr>\n<th>装饰器模式</th>\n<th>适配器模式</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>是一种非常特别的适配器模式</td>\n<td>可以不保留层级关系</td>\n</tr>\n<tr>\n<td>装饰者和被装饰者都要实现同一个接口，主要目的是为了扩展，依旧保留OOP关系</td>\n<td>适配者和被适配者没有必然的层级联系，通常采用代理或者继承形式进行包装</td>\n</tr>\n<tr>\n<td>满足is-a的关系</td>\n<td>满足has-a</td>\n</tr>\n<tr>\n<td>注重的是覆盖、扩展</td>\n<td>注重兼容、转换</td>\n</tr>\n</tbody>\n</table>\n<pre><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">ISigninService</span> </span>{\n     <span class=\"hljs-function\">ResultMsg <span class=\"hljs-title\">regist</span><span class=\"hljs-params\">(String username, String password)</span></span>;\n\n    <span class=\"hljs-comment\">/**\n     * 登录的方法\n     * <span class=\"hljs-doctag\">@param</span> username\n     * <span class=\"hljs-doctag\">@param</span> password\n     * <span class=\"hljs-doctag\">@return</span>\n     */</span>\n     <span class=\"hljs-function\">ResultMsg <span class=\"hljs-title\">login</span><span class=\"hljs-params\">(String username, String password)</span></span>;\n}\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Member</span> </span>{\n\n    <span class=\"hljs-keyword\">private</span> String username;\n    <span class=\"hljs-keyword\">private</span> String password;\n    <span class=\"hljs-keyword\">private</span> String mid;\n    <span class=\"hljs-keyword\">private</span> String info;\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getUsername</span><span class=\"hljs-params\">()</span> </span>{\n        <span class=\"hljs-keyword\">return</span> username;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setUsername</span><span class=\"hljs-params\">(String username)</span> </span>{\n        <span class=\"hljs-keyword\">this</span>.username = username;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getPassword</span><span class=\"hljs-params\">()</span> </span>{\n        <span class=\"hljs-keyword\">return</span> password;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setPassword</span><span class=\"hljs-params\">(String password)</span> </span>{\n        <span class=\"hljs-keyword\">this</span>.password = password;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getMid</span><span class=\"hljs-params\">()</span> </span>{\n        <span class=\"hljs-keyword\">return</span> mid;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setMid</span><span class=\"hljs-params\">(String mid)</span> </span>{\n        <span class=\"hljs-keyword\">this</span>.mid = mid;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getInfo</span><span class=\"hljs-params\">()</span> </span>{\n        <span class=\"hljs-keyword\">return</span> info;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setInfo</span><span class=\"hljs-params\">(String info)</span> </span>{\n        <span class=\"hljs-keyword\">this</span>.info = info;\n    }\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ResultMsg</span> </span>{\n\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> code;\n    <span class=\"hljs-keyword\">private</span> String msg;\n    <span class=\"hljs-keyword\">private</span> Object data;\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">ResultMsg</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> code, String msg, Object data)</span> </span>{\n        <span class=\"hljs-keyword\">this</span>.code = code;\n        <span class=\"hljs-keyword\">this</span>.msg = msg;\n        <span class=\"hljs-keyword\">this</span>.data = data;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getCode</span><span class=\"hljs-params\">()</span> </span>{\n        <span class=\"hljs-keyword\">return</span> code;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setCode</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> code)</span> </span>{\n        <span class=\"hljs-keyword\">this</span>.code = code;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getMsg</span><span class=\"hljs-params\">()</span> </span>{\n        <span class=\"hljs-keyword\">return</span> msg;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setMsg</span><span class=\"hljs-params\">(String msg)</span> </span>{\n        <span class=\"hljs-keyword\">this</span>.msg = msg;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Object <span class=\"hljs-title\">getData</span><span class=\"hljs-params\">()</span> </span>{\n        <span class=\"hljs-keyword\">return</span> data;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setData</span><span class=\"hljs-params\">(Object data)</span> </span>{\n        <span class=\"hljs-keyword\">this</span>.data = data;\n    }\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">SigninService</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title\">ISigninService</span> </span>{\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ResultMsg <span class=\"hljs-title\">regist</span><span class=\"hljs-params\">(String username,String password)</span></span>{\n        <span class=\"hljs-keyword\">return</span>  <span class=\"hljs-keyword\">new</span> ResultMsg(<span class=\"hljs-number\">200</span>,<span class=\"hljs-string\">\"注册成功\"</span>,<span class=\"hljs-keyword\">new</span> Member());\n    }\n\n\n    <span class=\"hljs-comment\">/**\n     * 登录的方法\n     * <span class=\"hljs-doctag\">@param</span> username\n     * <span class=\"hljs-doctag\">@param</span> password\n     * <span class=\"hljs-doctag\">@return</span>\n     */</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ResultMsg <span class=\"hljs-title\">login</span><span class=\"hljs-params\">(String username,String password)</span></span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">null</span>;\n    }\n}\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">ISigninForThirdService</span>  <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">ISigninService</span> </span>{\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ResultMsg <span class=\"hljs-title\">loginForQQ</span><span class=\"hljs-params\">(String openId)</span></span>;\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ResultMsg <span class=\"hljs-title\">loginForWechat</span><span class=\"hljs-params\">(String openId)</span></span>;\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ResultMsg <span class=\"hljs-title\">loginForToken</span><span class=\"hljs-params\">(String token)</span></span>;\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ResultMsg <span class=\"hljs-title\">loginForTelphone</span><span class=\"hljs-params\">(String telphone,String code)</span></span>;\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ResultMsg <span class=\"hljs-title\">loginForRegist</span><span class=\"hljs-params\">(String username,String password)</span></span>;\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">SigninForThirdService</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title\">ISigninForThirdService</span> </span>{\n\n    <span class=\"hljs-keyword\">private</span> ISigninService service;\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">SigninForThirdService</span><span class=\"hljs-params\">(ISigninService service)</span></span>{\n        <span class=\"hljs-keyword\">this</span>.service = service;\n    }\n\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ResultMsg <span class=\"hljs-title\">regist</span><span class=\"hljs-params\">(String username, String password)</span> </span>{\n        <span class=\"hljs-keyword\">return</span> service.regist(username,password);\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ResultMsg <span class=\"hljs-title\">login</span><span class=\"hljs-params\">(String username, String password)</span> </span>{\n        <span class=\"hljs-keyword\">return</span> service.login(username,password);\n    }\n\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ResultMsg <span class=\"hljs-title\">loginForQQ</span><span class=\"hljs-params\">(String openId)</span></span>{\n        <span class=\"hljs-keyword\">return</span> loginForRegist(openId,<span class=\"hljs-keyword\">null</span>);\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ResultMsg <span class=\"hljs-title\">loginForWechat</span><span class=\"hljs-params\">(String openId)</span></span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">null</span>;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ResultMsg <span class=\"hljs-title\">loginForToken</span><span class=\"hljs-params\">(String token)</span></span>{\n        <span class=\"hljs-comment\">//通过token拿到用户信息，然后再重新登陆了一次</span>\n        <span class=\"hljs-keyword\">return</span>  <span class=\"hljs-keyword\">null</span>;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ResultMsg <span class=\"hljs-title\">loginForTelphone</span><span class=\"hljs-params\">(String telphone,String code)</span></span>{\n\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">null</span>;\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ResultMsg <span class=\"hljs-title\">loginForRegist</span><span class=\"hljs-params\">(String username,String password)</span></span>{\n        <span class=\"hljs-keyword\">this</span>.regist(username,<span class=\"hljs-keyword\">null</span>);\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>.login(username,<span class=\"hljs-keyword\">null</span>);\n    }\n}\n</code></pre>\n",
  "link": "/zh-cn/docs/1.设计模式/10.装饰器模式.html",
  "meta": {
    "title": "装饰器模式-码农阿华",
    "keywords": "装饰器模式，设计模式",
    "description": "装饰器的核心就是新接口继承原有的接口，对于原有的实现类，重新注入到新的实现类。"
  }
}