{
  "filename": "6.HDFS.md",
  "__html": "<h2 id=\"%E7%94%A8%E6%B3%95\">用法 <a class=\"header-anchor\" href=\"#%E7%94%A8%E6%B3%95\">#</a></h2>\n<pre><code class=\"language-sql\">ENGINE = HDFS(URI, format)\n</code></pre>\n<ul>\n<li>URI 参数是HDFS中的整个文件URI。</li>\n<li>format 参数指定一种可用的文件格式。 执行</li>\n</ul>\n<h2 id=\"demo\">DEMO <a class=\"header-anchor\" href=\"#demo\">#</a></h2>\n<p><strong>1.</strong> 设置 <code>hdfs_engine_table</code> 表:</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> hdfs_engine_table (<span class=\"hljs-keyword\">name</span> <span class=\"hljs-keyword\">String</span>, <span class=\"hljs-keyword\">value</span> UInt32) <span class=\"hljs-keyword\">ENGINE</span>=HDFS(<span class=\"hljs-string\">'hdfs://hdfs1:9000/other_storage'</span>, <span class=\"hljs-string\">'TSV'</span>)\n\n</code></pre>\n<p><strong>2.</strong> 填充文件:</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> hdfs_engine_table <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-string\">'one'</span>, <span class=\"hljs-number\">1</span>), (<span class=\"hljs-string\">'two'</span>, <span class=\"hljs-number\">2</span>), (<span class=\"hljs-string\">'three'</span>, <span class=\"hljs-number\">3</span>)\n\n</code></pre>\n<p><strong>3.</strong> 查询数据:</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> * <span class=\"hljs-keyword\">FROM</span> hdfs_engine_table <span class=\"hljs-keyword\">LIMIT</span> <span class=\"hljs-number\">2</span>\n</code></pre>\n<ol>\n<li>假设我们在HDFS上有几个TSV格式的文件，其中包含以下Uri:</li>\n</ol>\n<ul>\n<li>‘hdfs://hdfs1:9000/some_dir/some_file_1’</li>\n<li>‘hdfs://hdfs1:9000/some_dir/some_file_2’</li>\n<li>‘hdfs://hdfs1:9000/some_dir/some_file_3’</li>\n<li>‘hdfs://hdfs1:9000/another_dir/some_file_1’</li>\n<li>‘hdfs://hdfs1:9000/another_dir/some_file_2’</li>\n<li>‘hdfs://hdfs1:9000/another_dir/some_file_3’</li>\n</ul>\n<ol>\n<li>\n<p>有几种方法可以创建由所有六个文件组成的表:</p>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> table_with_range (<span class=\"hljs-keyword\">name</span> <span class=\"hljs-keyword\">String</span>, <span class=\"hljs-keyword\">value</span> UInt32) <span class=\"hljs-keyword\">ENGINE</span> = HDFS(<span class=\"hljs-string\">'hdfs://hdfs1:9000/{some,another}_dir/some_file_{1..3}'</span>, <span class=\"hljs-string\">'TSV'</span>)\n\n\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> table_with_question_mark (<span class=\"hljs-keyword\">name</span> <span class=\"hljs-keyword\">String</span>, <span class=\"hljs-keyword\">value</span> UInt32) <span class=\"hljs-keyword\">ENGINE</span> = HDFS(<span class=\"hljs-string\">'hdfs://hdfs1:9000/{some,another}_dir/some_file_?'</span>, <span class=\"hljs-string\">'TSV'</span>)\n\n<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> table_with_asterisk (<span class=\"hljs-keyword\">name</span> <span class=\"hljs-keyword\">String</span>, <span class=\"hljs-keyword\">value</span> UInt32) <span class=\"hljs-keyword\">ENGINE</span> = HDFS(<span class=\"hljs-string\">'hdfs://hdfs1:9000/{some,another}_dir/*'</span>, <span class=\"hljs-string\">'TSV'</span>)\n\n</code></pre>\n</li>\n</ol>\n",
  "link": "/zh-cn/docs/3.数据库/clickhouse/6.HDFS.html",
  "meta": {}
}