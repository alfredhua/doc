{
  "filename": "2.Ribbon.md",
  "__html": "<p>通过Spring Cloud Ribbon的封装，我们在微服务架构中使用客户端负载均衡调用非常简单，只需要两步：</p>\n<ol>\n<li>服务提供者只需要启动多个服务实例并注册到一个注册中心或多个相关联的服务注册中心。</li>\n<li>服务消费者直接通过调用被@LoadBalanced注解修饰过的RestTemplate来是实现面向服务的接口调用。</li>\n</ol>\n<p>如果需要自己的规则，那么可以实现IRule，重写choose方法。</p>\n<p><a href=\"git@github.com:alfredhua/spring-cloud-manage.git\">git地址:git@github.com:alfredhua/spring-cloud-manage.git</a></p>\n<p>server模块，server2模块，m-consume-ribbon模块</p>\n<p>服务端：启动俩个同样的server即可</p>\n<p>引入jav包</p>\n<pre><code class=\"language-java\">        compile group: <span class=\"hljs-string\">'org.springframework.cloud'</span>, name: <span class=\"hljs-string\">'spring-cloud-starter-netflix-ribbon'</span>, version: <span class=\"hljs-string\">'2.2.3.RELEASE'</span>\n\n</code></pre>\n<p>配置LoadBalanced</p>\n<pre><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.consume.config;\n\n<span class=\"hljs-keyword\">import</span> org.springframework.cloud.client.loadbalancer.LoadBalanced;\n<span class=\"hljs-keyword\">import</span> org.springframework.context.annotation.Bean;\n<span class=\"hljs-keyword\">import</span> org.springframework.context.annotation.Configuration;\n<span class=\"hljs-keyword\">import</span> org.springframework.web.client.RestTemplate;\n\n<span class=\"hljs-comment\">/**\n * <span class=\"hljs-doctag\">@author</span> guozhenhua\n * <span class=\"hljs-doctag\">@date</span> 2020/06/21\n */</span>\n<span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Config</span> </span>{\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-meta\">@LoadBalanced</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> RestTemplate <span class=\"hljs-title\">restTemplate</span><span class=\"hljs-params\">()</span></span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> RestTemplate();\n    }\n}\n</code></pre>\n",
  "link": "/zh-cn/docs/5.框架/spring-cloud/2.Ribbon.html",
  "meta": {}
}