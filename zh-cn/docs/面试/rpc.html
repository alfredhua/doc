<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="rpc" />
	<meta name="description" content="rpc" />
	<!-- 网页标签标题 -->
	<title>rpc</title>
	<link rel="shortcut icon" href="/img/docsite.ico"/>
	<link rel="stylesheet" href="/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a class="logo" href="/zh-cn/index.html"><span class="logo-normal">码农阿华| <span class="logo-desc">玩玩技术，说说产品</span></span></a><div class="search search-normal"><span class="icon-search"></span></div><div class="header-menu"><img class="header-menu-toggle" src="/img/system/menu_gray.png"/><ul><li class="menu-item menu-item-normal"><a href="/zh-cn/index.html" target="_self">首页</a></li><li class="menu-item menu-item-normal menu-item-normal-active"><a href="/zh-cn/docs/begin.html" target="_self">文档</a></li><li class="menu-item menu-item-normal"><a href="/zh-cn/blog/index.html" target="_self">博客</a></li></ul></div></div></header><div class="bar"><div class="bar-body"><img src="/img/system/docs.png" class="front-img"/><span>文档</span><img src="/img/system/docs.png" class="back-img"/></div></div><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>设计模式</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>设计原则<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/1.设计模式/1.单一职责.html" target="_self">单一职责</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/1.设计模式/2.开闭原则.html" target="_self">开闭原则</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/1.设计模式/3.接口隔离原则.html" target="_self">接口隔离原则</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/1.设计模式/4.工厂模式.html" target="_self">工厂模式</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/1.设计模式/5.单例模式.html" target="_self">单例模式</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/1.设计模式/6.原型模式.html" target="_self">原型模式</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/1.设计模式/7.代理模式.html" target="_self">代理模式</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/1.设计模式/8.策略模式.html" target="_self">策略模式</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/1.设计模式/9.委派模式和适配器模式.html" target="_self">委派模式和适配器模式</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/1.设计模式/10.装饰器模式.html" target="_self">装饰器模式</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>JAVA</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>基础<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/基础/1.HashMap.html" target="_self">HashMap</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/基础/2.integer.html" target="_self">integer</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/基础/3.calculations.html" target="_self">calculations</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/基础/4.LinkedHashMap.html" target="_self">LinkedHashMap</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/基础/5.list.html" target="_self">list</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/基础/6.reference.html" target="_self">reference</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/基础/7.synchronized.html" target="_self">synchronized</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/基础/8.volatile.html" target="_self">volatile</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>JVM<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/jvm/1.jvm类加载.html" target="_self">jvm类加载</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/jvm/2.栈帧.html" target="_self">栈帧</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/jvm/3.内存模型.html" target="_self">内存模型</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/jvm/4.垃圾回收.html" target="_self">垃圾回收</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/jvm/5.垃圾收集器.html" target="_self">垃圾收集器</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/jvm/6.JVM参数.html" target="_self">JVM参数</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/jvm/7.JVM常用命令.html" target="_self">JVM常用命令</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/jvm/8.JVM常用工具.html" target="_self">JVM常用工具</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/jvm/9.常见问题.html" target="_self">常见问题</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>网络编程<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/网络编程/1.Http.html" target="_self">Http</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/网络编程/2.Socket.html" target="_self">Socket</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>并发编程<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/并发/1.并发基本概念.html" target="_self">并发基本概念</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/并发/2.并发级别.html" target="_self">并发级别</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/并发/3.CountDownLatch.html" target="_self">CountDownLatch</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/并发/4.CyclicBarrier.html" target="_self">CyclicBarrier</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/并发/5.线程池.html" target="_self">线程池</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/并发/6.原子类.html" target="_self">原子类</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.java/并发/7.锁.html" target="_self">锁</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>数据库</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>MySQL<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/mysql/1.mysql安装与卸载.html" target="_self">mysql安装与卸载</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/mysql/2.忘记和修改密码.html" target="_self">忘记和修改密码</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/mysql/3.Mysql的基本语法.html" target="_self">Mysql的基本语法</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/mysql/4.mysql索引.html" target="_self">mysql索引</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/mysql/5.SQL的执行流程.html" target="_self">SQL的执行流程</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/mysql/6.MySQL的存储结构.html" target="_self">MySQL的存储结构</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/mysql/7.MySQL事务.html" target="_self">MySQL事务</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/mysql/8.MySQL锁.html" target="_self">MySQL锁</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/mysql/9.性能优化.html" target="_self">性能优化</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>ElasticSearch<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/elasticsearch/1.安装.html" target="_self">安装</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/elasticsearch/2.基本概念.html" target="_self">基本概念</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/elasticsearch/3.logstash导入数据.html" target="_self">logstash导入数据</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/elasticsearch/4.基本操作.html" target="_self">基本操作</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/elasticsearch/5.Index操作.html" target="_self">Index操作</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/elasticsearch/6.CRUD.html" target="_self">CRUD</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/elasticsearch/7.集群操作.html" target="_self">集群操作</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/elasticsearch/8.多字段特性及自定义Analyzer.html" target="_self">多字段特性及自定义Analyzer</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/elasticsearch/.DS_Stohtml" target="_self">S_St</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/elasticsearch/9.IndexTemplate.html" target="_self">IndexTemplate</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/elasticsearch/10.聚合.html" target="_self">.聚合</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/elasticsearch/11.Term和全文本查询.html" target="_self">.Term和全文本查询</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/elasticsearch/12.错误.html" target="_self">.错误</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>ClickHouse<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/clickhouse/1.介绍.html" target="_self">介绍</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/clickhouse/2.安装教程.html" target="_self">安装教程</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/clickhouse/3.JAVA接入.html" target="_self">JAVA接入</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/clickhouse/4.SQL语法.html" target="_self">SQL语法</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/clickhouse/5.Mysql迁移.html" target="_self">Mysql迁移</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/clickhouse/5.引擎engine.html" target="_self">引擎engine</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/3.数据库/clickhouse/6.HDFS.html" target="_self">HDFS</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>MQ</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>RabbitMQ<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/4.mq/rabbitmq/1.安装.html" target="_self">安装</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/4.mq/rabbitmq/2.消息模式.html" target="_self">消息模式</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/4.mq/rabbitmq/3.基本操作.html" target="_self">基本操作</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/4.mq/rabbitmq/4.消息可靠性投递.html" target="_self">消息可靠性投递</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/4.mq/rabbitmq/5.重复消费.html" target="_self">重复消费</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/4.mq/rabbitmq/6.消息丢失问题.html" target="_self">消息丢失问题</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/4.mq/rabbitmq/7.高可用.html" target="_self">高可用</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/4.mq/rabbitmq/8.消息积压.html" target="_self">消息积压</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/4.mq/rabbitmq/9.死信队列.html" target="_self">死信队列</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/4.mq/rabbitmq/10.如何设计一个MQ.html" target="_self">.如何设计一个MQ</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>框架</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>MyBatis<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/mybatis/1.jdbc连接流程.html" target="_self">jdbc连接流程</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/mybatis/2.源码解读.html" target="_self">源码解读</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/mybatis/3.手写mybatis.html" target="_self">手写mybatis</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/mybatis/4.ORM.html" target="_self">ORM</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Spring<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/spring/1.基本教程.html" target="_self">基本教程</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/spring/2.IOC的XML方式源码分析.html" target="_self">IOC的XML方式源码分析</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/spring/3.IOC的注解方式源码解析.html" target="_self">IOC的注解方式源码解析</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/spring/4.DI源码解析.html" target="_self">DI源码解析</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/spring/5.AOP源码分析.html" target="_self">AOP源码分析</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/spring/6.mvc.html" target="_self">mvc</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/spring/7.事务.html" target="_self">事务</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>spring-boot<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/spring-boot/1.SpringBoot初识.html" target="_self">SpringBoot初识</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/spring-boot/2.源码解读.html" target="_self">源码解读</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>spring-cloud<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/spring-cloud/1.consul.html" target="_self">consul</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/spring-cloud/2.Ribbon.html" target="_self">Ribbon</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/spring-cloud/3.feign.html" target="_self">feign</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/spring-cloud/4.Config.html" target="_self">Config</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/5.框架/spring-cloud/5.Hystrix.html" target="_self">Hystrix</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>缓存</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Redis<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/6.缓存/redis/1.安装.html" target="_self">安装</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/6.缓存/redis/2.数据类型.html" target="_self">数据类型</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/6.缓存/redis/3.应用场景.html" target="_self">应用场景</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/6.缓存/redis/4.单线程模型.html" target="_self">单线程模型</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/6.缓存/redis/5.过期策略.html" target="_self">过期策略</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/6.缓存/redis/6.数据恢复.html" target="_self">数据恢复</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/6.缓存/redis/7.哨兵模式.html" target="_self">哨兵模式</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/6.缓存/redis/8.缓冲.html" target="_self">缓冲</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/6.缓存/redis/9.RedisTemplate.html" target="_self">RedisTemplate</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/6.缓存/redis/10.集群.html" target="_self">集群</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/6.缓存/redis/11.lock.html" target="_self">lock</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>分布式</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>zookeeper<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/7.分布式/zookeeper/1.基本概念.html" target="_self">基本概念</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/7.分布式/zookeeper/2.操作.html" target="_self">操作</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/7.分布式/zookeeper/3.使用场景.html" target="_self">使用场景</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/7.分布式/zookeeper/4.分布式锁.html" target="_self">分布式锁</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/7.分布式/zookeeper/5.分布式一致性.html" target="_self">分布式一致性</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/7.分布式/zookeeper/6.集群搭建.html" target="_self">集群搭建</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>服务器</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/8.服务器/1.centos下软件安装.html" target="_self">centos下软件安装</a></li></ul></li><li class="menu-item menu-item-level-1"><span>算法</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>算法<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/9.算法/1.递归.html" target="_self">递归</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/9.算法/2.排序.html" target="_self">排序</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/9.算法/3.双子针.html" target="_self">双子针</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/9.算法/4.回溯.html" target="_self">回溯</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>工具</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>arthas<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/10.工具/arthas/1.安装.html" target="_self">安装</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/10.工具/arthas/2.dashboard.html" target="_self">dashboard</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/10.工具/arthas/3.thread.html" target="_self">thread</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/10.工具/arthas/4.JVM.html" target="_self">JVM</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>docker<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/10.工具/docker/1.安装.html" target="_self">安装</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>k8s<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/10.工具/k8s/1.环境搭建.html" target="_self">环境搭建</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/10.工具/k8s/2.kubectl.html" target="_self">kubectl</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>maven<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/10.工具/maven/1.解决依赖冲突.html" target="_self">解决依赖冲突</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>面试</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/java基础.html" target="_self">java基础</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/mybatis.html" target="_self">mybatis</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/mysql.html" target="_self">mysql</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/spring.html" target="_self">spring</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/springboot.html" target="_self">spring-boot</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/zookeeper.html" target="_self">zookeeper</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/并发.html" target="_self">并发</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/网络.html" target="_self">网络</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/锁.html" target="_self">锁</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/集合.html" target="_self">集合</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/设计模式.html" target="_self">设计模式</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/nginx.html" target="_self">nginx</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/jvm.html" target="_self">jvm</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/Nodejs.html" target="_self">NodeJs</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/rabbbitmq.html" target="_self">RabbitMQ</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/redis.html" target="_self">redis</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/面试/rpc.html" target="_self">rpc</a></li></ul></li></ul></div><div class="doc-content markdown-body"><h2 id="io%E6%A8%A1%E5%9E%8B">IO模型 <a class="header-anchor" href="#io%E6%A8%A1%E5%9E%8B">#</a></h2>
<p>BIO：线程发起IO请求，不管内核是否准备好IO操作，从发起请求起，线程一直阻塞，直到操作完成。如下图：</p>
<p><img src="http://java-run-blog.oss-cn-zhangjiakou.aliyuncs.com/bcfdf4aa19d849b1a33eabb8b690587a.jpeg" alt="image"></p>
<p>NIO(reactor模型)：线程发起IO请求，立即返回；内核在做好IO操作的准备之后，通过调用注册的回调函数通知线程做IO操作，线程开始阻塞，直到操作完成。如下图：</p>
<p><img src="http://java-run-blog.oss-cn-zhangjiakou.aliyuncs.com/b24a9c7327844940bd254c86c0834740.jpeg" alt="image"></p>
<p>AIO(proactor模型)：线程发起IO请求，立即返回；内存做好IO操作的准备之后，做IO操作，直到操作完成或者失败，通过调用注册的回调函数通知线程做IO操作完成或者失败。如下图：</p>
<p><img src="http://java-run-blog.oss-cn-zhangjiakou.aliyuncs.com/404fc2ffd9ba4ac2b9c27d34ce467671.jpeg" alt="image"></p>
<ul>
<li>BIO （Blocking I/O）：同步阻塞I/O模式，数据的读取写入必须阻塞在一个线程内等待其完成。这里使用那个经典的烧开水例子，这里假设一个烧开水的场景，有一排水壶在烧开水，BIO的工作模式就是， 叫一个线程停留在一个水壶那，直到这个水壶烧开，才去处理下一个水壶。但是实际上线程在等待水壶烧开的时间段什么都没有做。</li>
</ul>
<blockquote>
<p>因为BIO模型下一个线程同时只能做一个工作，如果线程在执行过程中依赖于需要等待的资源，那么该线程会长期处于阻塞状态，我们知道在整个操作系统中，线程是系统执行的基本单位，在BIO模型下的线程 阻塞就会导致系统线程的切换，从而对整个系统性能造成一定的影响。当然如果我们只需要创建少量可控的线程，那么采用BIO模型也是很好的选择，但如果在需要考虑高并发的web或者tcp服务器中采用BIO模型就无法应对了，如果系统开辟成千上万的线程，那么CPU的执行时机都会浪费在线程的切换中，使得线程的执行效率大大降低。此外，关于线程这里说一句题外话，在系统开发中线程的生命周期一定要准确控制，在需要一定规模并发的情形下，尽量使用线程池来确保线程创建数目在一个合理的范围之内，切莫编写线程数量创建上限的代码。</p>
</blockquote>
<ul>
<li>NIO （New I/O）：同时支持阻塞与非阻塞模式，但这里我们以其同步非阻塞I/O模式来说明，那么什么叫做同步非阻塞？如果还拿烧开水来说，NIO的做法是叫一个线程不断的轮询每个水壶的状态，看看是否有水壶的状态发生了改变，从而进行下一步的操作。</li>
</ul>
<blockquote>
<p>关于NIO，国内有很多技术博客将英文翻译成No-Blocking I/O，非阻塞I/O模型 ，当然这样就与BIO形成了鲜明的特性对比。NIO本身是基于事件驱动的思想来实现的，其目的就是解决BIO的大并发问题，在BIO模型中，如果需要并发处理多个I/O请求，那就需要多线程来支持，NIO使用了多路复用器机制，以socket使用来说，多路复用器通过不断轮询各个连接的状态，只有在socket有流可读或者可写时，应用程序才需要去处理它，在线程的使用上，就不需要一个连接就必须使用一个处理线程了，而是只是有效请求时（确实需要进行I/O处理时），才会使用一个线程去处理，这样就避免了BIO模型下大量线程处于阻塞等待状态的情景。</p>
</blockquote>
<ul>
<li>AIO （ Asynchronous I/O）：异步非阻塞I/O模型。异步非阻塞与同步非阻塞的区别在哪里？异步非阻塞无需一个线程去轮询所有IO操作的状态改变，在相应的状态改变后，系统会通知对应的线程来处理。对应到烧开水中就是，为每个水壶上面装了一个开关，水烧开之后，水壶会自动通知我水烧开了。</li>
</ul>
<blockquote>
<p>NIO需要使用者线程不停的轮询IO对象，来确定是否有数据准备好可以读了，而AIO则是在数据准备好之后，才会通知数据使用者，这样使用者就不需要不停地轮询了。当然AIO的异步特性并不是Java实现的伪异步，而是使用了系统底层API的支持，在Unix系统下，采用了epoll IO模型，而windows便是使用了IOCP模型。</p>
</blockquote>
<h2 id="rpc">RPC <a class="header-anchor" href="#rpc">#</a></h2>
<p>​	RPC（Remote Procedure Call）—远程过程调用，它是一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的协议。比如两个不同的服务 A、B 部署在两台不同的机器上，那么服务 A 如果想要调用服务 B 中的某个方法该怎么办呢？使用 HTTP请求 当然可以，但是可能会比较慢而且一些优化做的并不好。 RPC 的出现就是为了解决这个问题。</p>
<h2 id="dubb%E6%94%AF%E6%8C%81%E7%9A%84%E5%BA%8F%E5%88%97%E5%8C%96">dubb支持的序列化 <a class="header-anchor" href="#dubb%E6%94%AF%E6%8C%81%E7%9A%84%E5%BA%8F%E5%88%97%E5%8C%96">#</a></h2>
<ol>
<li>dubbo 协议</li>
<li>rmi 协议</li>
<li>hessian 协议</li>
<li>http 协议</li>
<li>webservice</li>
</ol>
<h2 id="rpc%E5%8E%9F%E7%90%86">rpc原理 <a class="header-anchor" href="#rpc%E5%8E%9F%E7%90%86">#</a></h2>
<ol>
<li>服务消费方（client）调用以本地调用方式调用服务；</li>
<li>client stub接收到调用后负责将方法、参数等组装成能够进行网络传输的消息体；</li>
<li>client stub找到服务地址，并将消息发送到服务端；</li>
<li>server stub收到消息后进行解码；</li>
<li>server stub根据解码结果调用本地的服务；</li>
<li>本地服务执行并将结果返回给server stub；</li>
<li>server stub将返回结果打包成消息并发送至消费方；</li>
<li>client stub接收到消息，并进行解码；</li>
<li>服务消费方得到最终结果。</li>
</ol>
<h2 id="dubbo%E4%BC%98%E5%8A%BF">dubbo优势 <a class="header-anchor" href="#dubbo%E4%BC%98%E5%8A%BF">#</a></h2>
<ol>
<li><strong>负载均衡</strong>——同一个服务部署在不同的机器时该调用那一台机器上的服务。</li>
<li><strong>服务调用链路生成</strong>——随着系统的发展，服务越来越多，服务间依赖关系变得错踪复杂，甚至分不清哪个应用要在哪个应用之前启动，架构师都不能完整的描述应用的架构关系。Dubbo 可以为我们解决服务之间互相是如何调用的。</li>
<li><strong>服务访问压力以及时长统计、资源调度和治理</strong>——基于访问压力实时管理集群容量，提高集群利用率。</li>
<li><strong>服务降级</strong>——某个服务挂掉之后调用备用服务。</li>
</ol>
<h2 id="%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5">负载均衡策略 <a class="header-anchor" href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5">#</a></h2>
<ol>
<li>
<p>Random LoadBalance(默认，基于权重的随机负载均衡机制)</p>
<p>随机，按权重设置随机概率。在一个截面上碰撞的概率高，但调用量越大分布越均匀，而且按概率使用权重后也比较均匀，有利于动态调整提供者权重。</p>
</li>
<li>
<p>RoundRobin LoadBalance(不推荐，基于权重的轮询负载均衡机制)</p>
<p>轮循，按公约后的权重设置轮循比率。存在慢的提供者累积请求的问题，比如：第二台机器很慢，但没挂，当请求调到第二台时就卡在那，久而久之，所有请求都卡在调到第二台上。</p>
</li>
<li>
<p>LeastActive LoadBalance</p>
<p>最少活跃调用数，相同活跃数的随机，活跃数指调用前后计数差。使慢的提供者收到更少请求，因为越慢的提供者的调用前后计数差会越大。</p>
</li>
<li>
<p>ConsistentHash LoadBalance</p>
<p>一致性 Hash，相同参数的请求总是发到同一提供者。(如果你需要的不是随机负载均衡，是要一类请求都到一个节点，那就走这个一致性hash策略。)当某一台提供者挂时，原本发往该提供者的请求，基于虚拟节点，平摊到其它提供者，不会引起剧烈变动。</p>
</li>
</ol>
<h2 id="zookeeper%E5%AE%95%E6%9C%BA%E4%B8%8Edubbo%E7%9B%B4%E8%BF%9E%E7%9A%84%E6%83%85%E5%86%B5">zookeeper宕机与dubbo直连的情况 <a class="header-anchor" href="#zookeeper%E5%AE%95%E6%9C%BA%E4%B8%8Edubbo%E7%9B%B4%E8%BF%9E%E7%9A%84%E6%83%85%E5%86%B5">#</a></h2>
<p>​	在实际生产中，假如zookeeper注册中心宕掉，一段时间内服务消费方还是能够调用提供方的服务的，实际上它使用的本地缓存进行通讯，这只是dubbo健壮性的一种体现。</p>
<ol>
<li>监控中心宕掉不影响使用，只是丢失部分采样数据</li>
<li>数据库宕掉后，注册中心仍能通过缓存提供服务列表查询，但不能注册新服务</li>
<li>注册中心对等集群，任意一台宕掉后，将自动切换到另一台</li>
<li>注册中心全部宕掉后，服务提供者和服务消费者仍能通过本地缓存通讯</li>
<li>服务提供者无状态，任意一台宕掉后，不影响使用</li>
<li>服务提供者全部宕掉后，服务消费者应用将无法使用，并无限次重连等待服务提供者恢复</li>
</ol>
<h2 id="rpc%E5%92%8Chttp">RPC和HTTP <a class="header-anchor" href="#rpc%E5%92%8Chttp">#</a></h2>
<p>Remote Procedure Call（远程过程调用），是一个计算机通信协议。该协议允许运行于一台计算机的程序调用另一台计算机的子程序，而程序员无需额外地为这个交互作用编程。</p>
<p>超文本传输协议，是一种应用层协议。规定了网络传输的请求格式、响应格式、资源定位和操作的方式等。但是底层采用什么网络传输协议，并没有规定，不过现在都是采用TCP协议作为底层传输协议。</p>
<ul>
<li>速度来看，RPC要比http更快，虽然底层都是TCP，但是http协议的信息往往比较臃肿，不过可以采用gzip压缩。</li>
<li>难度来看，RPC实现较为复杂，http相对比较简单</li>
<li>灵活性来看，http更胜一筹，因为它不关心实现细节，跨平台、跨语言。</li>
</ul>
<p>两者都有不同的使用场景：</p>
<ul>
<li>如果对效率要求更高，并且开发过程使用统一的技术栈，那么用RPC还是不错的。</li>
<li>如果需要更加灵活，跨语言、跨平台，显然http更合适</li>
</ul>
<h2 id="%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AArpc">如何设计一个rpc <a class="header-anchor" href="#%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AArpc">#</a></h2>
<ol>
<li>上来你的服务就得去注册中心注册吧，你是不是得有个注册中心，保留各个服务的信心，可以用zookeeper来做。</li>
<li>然后你的消费者需要去注册中心拿对应的服务信息吧，对吧，而且每个服务可能会存在于多台机器上</li>
<li>接着你就该发起一次请求了，咋发起？蒙圈了是吧。当然是基于动态代理了，你面向接口获取到一个动态代理，这个动态代理就是接口在本地的一个代理，然后这个代理会找到服务对应的机器地址</li>
<li>然后找哪个机器发送请求？那肯定得有个负载均衡算法了，比如最简单的可以随机轮询是不是</li>
<li>接着找到一台机器，就可以跟他发送请求了，第一个问题咋发送？你可以说用netty了，nio方式；第二个问题发送啥格式数据？你可以说用hessian序列化协议了，或者是别的，对吧。然后请求过去了。。</li>
<li>服务器那边一样的，需要针对你自己的服务生成一个动态代理，监听某个网络端口了，然后代理你本地的服务代码。接收到请求的时候，就调用对应的服务代码</li>
</ol>
</div></section><footer class="footer-container"><div class="footer-body"><div class="cols-container"><div class="col col-12"><h3>码农阿华</h3><p>联系邮箱：alfredhua@aliyun.com</p></div><div class="col col-6"><dl><dt>文档</dt><dd><a href="/zh-cn/docs/demo1.html" target="_self">概览</a></dd></dl></div><div class="col col-6"><dl><dt>资源</dt><dd><a href="/zh-cn/blog/index.html" target="_self">博客</a></dd></dl></div></div><div class="copyright"><span>CopyRight©2019 版权所有 码农阿华 京ICP备19044364号</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '';
  </script>
	<script src="/build/documentation.js"></script>
</body>
</html>